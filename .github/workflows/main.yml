name: Test_And_Deploy
on:
  push:
env:
  POSTGRES_HOST: localhost
  POSTGRES_PORT: 5432
  POSTGRES_DATABASE: postgres
  POSTGRES_POSTGRES_PW: postgres

jobs:
  healthcheck:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK
        uses: actions/setup-java@v2
        with:
          distribution: 'zulu'
          java-version: '17'
      - name: Build with gradle
        run: gradle wrapper && ./gradlew build

      # buildAndPush:
      #  needs: healthcheck
      # runs-on: ubuntu-latest

      #steps:
      # - uses: actions/checkout@v2
      #- name: Log into registry
      # run: docker login -u ${{ secrets.DOCKERNAME }} -p ${{ secrets.DOCKERPASSWORD }}

      #     - name: Build images

      #    - name: Push image
      #     if: github.ref == 'refs/heads/master'
      #    run: |
      #     DATABASE_NAME=what_meme SQL_USER=what_meme SQL_PASSWORD=what_meme docker-compose -f docker-compose.prod.yml push

    #deployContainer:
    # needs: buildAndPush
